# Chapter5. asyncì™€ Deferred

- launch ì½”ë£¨í‹´ ë¹Œë”ë¥¼ í†µí•´ ìƒì„±ë˜ëŠ” ì½”ë£¨í‹´ì€ ì‘ì—… ì‹¤í–‰ í›„ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ì§€ ì•ŠìŒ
    
    ![image.png](Chapter5%20async%E1%84%8B%E1%85%AA%20Deferred%202231e632507d807db500c26e4e7dd68c/image.png)
    
    â†’ í•˜ì§€ë§Œ, ìš°ë¦¬ê°€ ë§Œë“¤ì—ˆë˜ í”„ë¡œì íŠ¸ë¥¼ ìƒê°í•´ë³´ë©´, ê²°ê³¼ë¥¼ ìˆ˜ì‹ í•´ì•¼í•˜ëŠ” ê²½ìš°ê°€ ë¹ˆë²ˆ
    
    â†’ ë¹„ë™ê¸° ì‘ì—…ìœ¼ë¡œë¶€í„° ê²°ê³¼ë¥¼ ìˆ˜ì‹ í•´ì•¼ í•˜ëŠ” ê²½ìš°ë¥¼ ìœ„í•´ async ì½”ë£¨í‹´ ë¹Œë”ë¥¼ í†µí•´ ì½”ë£¨í‹´ìœ¼ë¡œë¶€í„° ê²°ê´ê°’ì„ ìˆ˜ì‹  ë°›ì„ ìˆ˜ ìˆìŒ
    
    ![image.png](Chapter5%20async%E1%84%8B%E1%85%AA%20Deferred%202231e632507d807db500c26e4e7dd68c/image%201.png)
    

## 5ì¥ì—ì„œ ë‹¤ë£¨ëŠ” ë‚´ìš©

- async-await ì‚¬ìš©í•´ ì½”ë£¨í‹´ìœ¼ë¡œë¶€í„° ê²°ê³½ê°’ ìˆ˜ì‹ í•˜ê¸°
- awaitAll í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ ë³µìˆ˜ì˜ ì½”ë£¨í‹´ìœ¼ë¡œë¶€í„° ê²°ê´ê°’ ìˆ˜ì‹ í•˜ê¸°
- withContext ì‚¬ìš©í•´ ì‹¤í–‰ ì¤‘ì¸ ì½”ë£¨í‹´ì˜ CoroutineContext ë³€ê²½í•˜ê¸°

## 5.1 async ì‚¬ìš©í•´ ê²°ê´ê°’ ìˆ˜ì‹ í•˜ê¸°

### 5.1.1 async ì‚¬ìš©í•´ Deferred ë§Œë“¤ê¸°

- ê²°ê´ê°’ ë°˜í™˜ ì—¬ë¶€
    - launch
        - block: suspend CoroutineScope.() â†’ Unit
        - Job ê°ì²´ ë°˜í™˜
    - async
        - block: suspend CoroutineScope.() â†’ T
        - Deferred ê°ì²´ ë°˜í™˜
        
- Deferred ê°ì²´ë€
    
    ë¯¸ë˜ì˜ ì–´ëŠ ì‹œì ì— ê²°ê´ê°’ì´ ë°˜í™˜ë  ìˆ˜ ìˆìŒ
    
    ![image.png](Chapter5%20async%E1%84%8B%E1%85%AA%20Deferred%202231e632507d807db500c26e4e7dd68c/image%202.png)
    
    Jobê³¼ ê°™ì´ ì½”ë£¨í‹´ì„ ì¶”ìƒí™”í•œ ê°ì²´ì´ì§€ë§Œ ì½”ë£¨í‹´ìœ¼ë¡œë¶€í„° ìƒì„±ëœ ê²°ê´ê°’ì„ ê°ì‹¸ëŠ” ê¸°ëŠ¥ì„ ì¶”ê°€
    
    Deferredì˜ ì œë„¤ë¦­ íƒ€ì…ì„ ì§€ì •í•˜ê¸° ìœ„í•´ì„œëŠ” Deferredì— ëª…ì‹œì ìœ¼ë¡œ íƒ€ì…ì„ ì„¤ì •
    
    ```kotlin
    val networdkDeferred: Deferred<String> = async(Dispatcher.IO) {
    	delay(1000L) // ë„¤íŠ¸ì›Œí¬ ìš”ì²­
    	return@async "Dummy Response" // ê²°ê³¼ê°’ ë°˜í™˜
    }
    ```
    

### 5.1.2 awaitë¥¼ ì‚¬ìš©í•´ ê²°ê´ê°’ ìˆ˜ì‹ 

- DeferredëŠ” ê²°ê³¼ê°’ì´ ìˆëŠ” Job ê°ì²´ì´ì§€ë§Œ, ì–¸ì œ ê²°ê´ê°’ì´ ë°˜í™˜ë  ì§€ëŠ” ëª¨ë¦„
    
    â†’ ê·¸ëŸ¼ ê²°ê³¼ê°’ì´ í•„ìš”í•œ ìƒí™© ) api ìš”ì²­ì„ ë³´ë‚´ì•¼í•˜ëŠ” ë°, í† í°ì´ í•„ìš”í•œ ìƒí™©
    
    â†’ ê²°ê³¼ê°’ì´ ìˆ˜ì‹ ë  ë•Œê¹Œì§€ ëŒ€ê¸°í•´ì•¼í•¨.
    
    â†’ Deferred ê°ì²´ëŠ” ê²°ê´ê°’ ìˆ˜ì‹  ëŒ€ê¸°ë¥¼ ìœ„í•´ **await** í•¨ìˆ˜ë¥¼ ì œê³µ
    
    ì¦‰, ì½”ë£¨í‹´ì´ ì‹¤í–‰ ì™„ë£Œë  ë•Œê¹Œì§€ í˜¸ì¶œë¶€ì˜ ì½”ë£¨í‹´ì„ ì¼ì‹œ ì¤‘ë‹¨í•˜ëŠ” ì ì—ì„œ Job ê°ì²´ì˜ join í•¨ìˆ˜ì™€ ë§¤ìš° ìœ ì‚¬
    
    ```kotlin
    fun main() = runBlocking<Unit> {
        println("[${Thread.currentThread().name}] ì‹¤í–‰")
        val networkDeferred: Deferred<String> = async(Dispatchers.IO) {
            println("[${Thread.currentThread().name}] ì‹¤í–‰")
            delay(1000L)
            return@async "Dummy Response"
        }
        val result = networkDeferred.await()
        println(result)
    }
    
    // [main @coroutine#1] ì‹¤í–‰
    // [DefaultDispatcher-worker-1 @coroutine#2] ì‹¤í–‰
    // Dummy Response
    ```
    
    ![image.png](Chapter5%20async%E1%84%8B%E1%85%AA%20Deferred%202231e632507d807db500c26e4e7dd68c/image%203.png)
    

## 5.2 DeferredëŠ” íŠ¹ìˆ˜í•œ í˜•íƒœì˜ Jobì´ë‹¤

- ëª¨ë“  ì½”ë£¨í‹´ ë¹Œë”ëŠ” Job ê°ì²´ë¥¼ ìƒì„± í›„ ë°˜í™˜
- í•˜ì§€ë§Œ, async ì½”ë£¨í‹´ ë¹Œë”ëŠ” Deferred ê°ì²´ë¥¼ ìƒì„± í›„ ë°˜í™˜
- Deferred ì¸í„°í˜ì´ìŠ¤ëŠ” Job ì¸í„°í˜ì´ìŠ¤ì˜ ì„œë¸Œíƒ€ì…ì´ê³ , ì•ì„œ ì‚¬ìš©í•œ await í•¨ìˆ˜ëŠ” ì½”ë£¨í‹´ìœ¼ë¡œë¶€í„° ê²°ê´ê°’ì„ ë°˜í™˜ë°›ìœ¼ë ¤ê³  Deferredì— ì¶”ê°€ëœ í•¨ìˆ˜ì„ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
- Job ê°ì²´ì˜ ëª¨ë“  í•¨ìˆ˜ì™€ í”„ë¡œí¼í‹°ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
    - joinì„ ì‚¬ìš©í•´ Deferred ê°ì²´ê°€ ì™„ë£Œë  ë•Œê¹Œì§€ í˜¸ì¶œë¶€ì˜ ì½”ë£¨í‹´ì„ ì¼ì‹œ ì¤‘ë‹¨ í•  ìˆ˜ ìˆìŒ. â†’ ë‹¤ë§Œ, joinì€ ë°˜í™˜ì´ Unitì´ë¼ì„œ, ë°˜í™˜ ê°’ì´ ì—†ìŒ
    - Deferred ê°ì²´ê°€ ì·¨ì†Œë¼ì•¼ í•  ê²½ìš° xanxel í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ ì·¨ì†Œí•  ìˆ˜ë„ ìˆìŒ
    - ìƒíƒœ ì¡°íšŒë¥¼ ìœ„í•´ì„œ, isActive, isCancelled, isCompleted ê°™ì€ í”„ë¡œí¼í‹°ë“¤ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ.
    
    ```kotlin
    package org.example.section5.code1
    
    import kotlinx.coroutines.*
    
    fun main() = runBlocking {
        println("[${Thread.currentThread().name}] ë©”ì¸ ì‹¤í–‰")
        val networkDeferred: Deferred<String> = async(Dispatchers.IO) {
            println("[${Thread.currentThread().name}] ì½”ë£¨í‹´ ì‹¤í–‰")
            delay(1000L)
            "Dummy Response"
        }
        val result = networkDeferred.join()
        println(result)
        printJobState(networkDeferred)
    }
    
    fun printJobState(job: Job) {
        println(
            "Job State\n" +
                "isActive >> ${job.isActive}\n" +
                "isCancelled >> ${job.isCancelled}\n" +
                "isCompleted >> ${job.isCompleted}"
        )
    }
    
    // [main @coroutine#1] ë©”ì¸ ì‹¤í–‰
    // [DefaultDispatcher-worker-1 @coroutine#2] ì½”ë£¨í‹´ ì‹¤í–‰
    // kotlin.Unit
    // Job State
    // isActive >> false
    // isCancelled >> false
    // isCompleted >> true
    ```
    

## 5.3 ë³µìˆ˜ì˜ ì½”ë£¨í‹´ìœ¼ë¡œë¶€í„° ê²°ê³¼ê°’ ìˆ˜ì‹ í•˜ê¸°

### 5.3.1. awaitë¥¼ ì‚¬ìš©í•´ ë³µìˆ˜ì˜ ì½”ë£¨í‹´ìœ¼ë¡œë¶€í„° ê²°ê´ê°’ ìˆ˜ì‹ í•˜ê¸°

- ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ í”Œë«í¼ì´ 2ê°œ â†’ ì„œë²„ë¡œë¶€í„° ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ ë³‘í•©í•˜ëŠ” ì½”ë“œ í•„ìš”

```kotlin
package section5.code1

import kotlinx.coroutines.*

fun main() = runBlocking {
    println("[${Thread.currentThread().name}] ë©”ì¸ ì‹¤í–‰")
    val startTime = System.currentTimeMillis()
    val participantDeferred1: Deferred<Array<String>> = async(Dispatchers.IO) {
        println("[${Thread.currentThread().name}] ì½”ë£¨í‹´1 ì‹¤í–‰")
        delay(1000L)
        return@async arrayOf("James", "Jason")
    }

    val participant1 = participantDeferred1.await()

    val participantDeferred2: Deferred<Array<String>> = async(Dispatchers.IO) {
        println("[${Thread.currentThread().name}] ì½”ë£¨í‹´2 ì‹¤í–‰")
        delay(1000L)
        return@async arrayOf("Jenny")
    }

    val participant2 = participantDeferred2.await()

    println("[${getElapsedTime(startTime)}] ì°¸ì—¬ì ëª©ë¡: ${listOf(*participant1, *participant2)}")
}

fun getElapsedTime(startTime: Long): String =
    "ì§€ë‚œ ì‹œê°„ : ${System.currentTimeMillis() - startTime}ms"
    
    
// [main @coroutine#1] ë©”ì¸ ì‹¤í–‰
// [DefaultDispatcher-worker-1 @coroutine#2] ì½”ë£¨í‹´1 ì‹¤í–‰
// [DefaultDispatcher-worker-1 @coroutine#3] ì½”ë£¨í‹´2 ì‹¤í–‰
// [ì§€ë‚œ ì‹œê°„ : 2023ms] ì°¸ì—¬ì ëª©ë¡: [James, Jason, Jenny]
```

![image.png](Chapter5%20async%E1%84%8B%E1%85%AA%20Deferred%202231e632507d807db500c26e4e7dd68c/image%204.png)

â†’ ë™ì‹œì— ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ë°ë„ ìˆœì°¨ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ê¸°ë•Œë¬¸ì— ë¹„íš¨ìœ¨ì 

```kotlin
package section5.code1

import kotlinx.coroutines.*

fun main() = runBlocking {
    println("[${Thread.currentThread().name}] ë©”ì¸ ì‹¤í–‰")
    val startTime = System.currentTimeMillis()
    val participantDeferred1: Deferred<Array<String>> = async(Dispatchers.IO) {
        println("[${Thread.currentThread().name}] ì½”ë£¨í‹´1 ì‹¤í–‰")
        delay(1000L)
        return@async arrayOf("James", "Jason")
    }
    
    val participantDeferred2: Deferred<Array<String>> = async(Dispatchers.IO) {
        println("[${Thread.currentThread().name}] ì½”ë£¨í‹´2 ì‹¤í–‰")
        delay(1000L)
        return@async arrayOf("Jenny")
    }

    val participant1 = participantDeferred1.await()
    val participant2 = participantDeferred2.await()

    println("[${getElapsedTime(startTime)}] ì°¸ì—¬ì ëª©ë¡: ${listOf(*participant1, *participant2)}")
}

// [main] ë©”ì¸ ì‹¤í–‰
// [DefaultDispatcher-worker-1] ì½”ë£¨í‹´1 ì‹¤í–‰
// [DefaultDispatcher-worker-3] ì½”ë£¨í‹´2 ì‹¤í–‰
// [ì§€ë‚œ ì‹œê°„ : 1017ms] ì°¸ì—¬ì ëª©ë¡: [James, Jason, Jenny]
```

![image.png](Chapter5%20async%E1%84%8B%E1%85%AA%20Deferred%202231e632507d807db500c26e4e7dd68c/image%205.png)

â†’ ì½”ë£¨í‹´ì´ ë™ì‹œì— ì²˜ë¦¬ê°€ ë˜ë¯€ë¡œ, ì„±ëŠ¥ ì¸¡ë©´ì—ì„œ ë§¤ìš° ì¢‹ìŒ

### 5.3.2 awaitAllì„ ì‚¬ìš©í•œ ê²°ê´ê°’ ìˆ˜ì‹ 

- ì½˜ì„œíŠ¸ë¥¼ ë“±ë¡ë°›ëŠ” ì‚¬ì´íŠ¸ê°€ 10ê°œì´ë©´?
    
    ![image.png](Chapter5%20async%E1%84%8B%E1%85%AA%20Deferred%202231e632507d807db500c26e4e7dd68c/image%206.png)
    
    ```kotlin
    package section5.code1
    
    import kotlinx.coroutines.*
    
    fun main() = runBlocking {
        println("[${Thread.currentThread().name}] ë©”ì¸ ì‹¤í–‰")
        val startTime = System.currentTimeMillis()
        val participantDeferred1: Deferred<Array<String>> = async(Dispatchers.IO) {
            println("[${Thread.currentThread().name}] ì½”ë£¨í‹´1 ì‹¤í–‰")
            delay(1000L)
            return@async arrayOf("James", "Jason")
        }
    
        val participantDeferred2: Deferred<Array<String>> = async(Dispatchers.IO) {
            println("[${Thread.currentThread().name}] ì½”ë£¨í‹´2 ì‹¤í–‰")
            delay(1000L)
            return@async arrayOf("Jenny")
        }
    
        val result: List<Array<String>> = awaitAll(participantDeferred1, participantDeferred2)
    
        println("[${getElapsedTime(startTime)}] ì°¸ì—¬ì ëª©ë¡: ${listOf(*result[0], *result[1])}")
    }
    
    // [main] ë©”ì¸ ì‹¤í–‰
    // [DefaultDispatcher-worker-1] ì½”ë£¨í‹´1 ì‹¤í–‰
    // [DefaultDispatcher-worker-3] ì½”ë£¨í‹´2 ì‹¤í–‰
    // [ì§€ë‚œ ì‹œê°„ : 1017ms] ì°¸ì—¬ì ëª©ë¡: [James, Jason, Jenny]
    ```
    

## 5.4 withContext

### 5.4.1 withContextë¡œ async-await ëŒ€ì²´í•˜ê¸°

![image.png](Chapter5%20async%E1%84%8B%E1%85%AA%20Deferred%202231e632507d807db500c26e4e7dd68c/image%207.png)

`withContext`ëŠ” **ì¦‰ì‹œ ì‹¤í–‰**ë˜ëŠ” suspend í•¨ìˆ˜ì´ê¸° ë•Œë¬¸ì—, `Lazy`í•˜ê²Œ ì‹¤í–‰í•˜ëŠ” ê¸°ëŠ¥ì€ **ì§ì ‘ì ìœ¼ë¡œ ì§€ì›í•˜ì§€ ì•Šì•„ìš”**.

## ğŸ” ì™œ `withContext`ëŠ” Lazyí•˜ì§€ ì•Šì€ê°€?

`withContext`ëŠ” ì¼ì¢…ì˜ **context switch**ì…ë‹ˆë‹¤. ì¦‰, ë¸”ë¡ ì•ˆì˜ ì½”ë“œë¥¼ ì§€ì •í•œ ë””ìŠ¤íŒ¨ì²˜(ì˜ˆ: `Dispatchers.IO`)ë¡œ **ì¦‰ì‹œ ì „í™˜í•´ì„œ ì‹¤í–‰**í•©ë‹ˆë‹¤.

```kotlin
kotlin
ë³µì‚¬í¸ì§‘
withContext(Dispatchers.IO) {
    // ì—¬ê¸° ì½”ë“œëŠ” ì¦‰ì‹œ ì‹¤í–‰ë¨
}

```

ì´ê±´ `launch`ë‚˜ `async`ì²˜ëŸ¼ Jobì„ ë§Œë“¤ì–´ì„œ *ë‚˜ì¤‘ì— ì‹¤í–‰*ì‹œí‚¤ëŠ” êµ¬ì¡°ê°€ ì•„ë‹ˆë¼:

- `suspend` í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ
- ì§€ê¸ˆ ì´ ìˆœê°„ contextë¥¼ ë°”ê¿”ì„œ
- ê·¸ ë¸”ë¡ì„ **ì¦‰ì‹œ ì‹¤í–‰**í•œ í›„
- ê²°ê³¼ë¥¼ ë¦¬í„´í•˜ëŠ” êµ¬ì¡°ì…ë‹ˆë‹¤.

ê·¸ë˜ì„œ `start = CoroutineStart.LAZY` ê°™ì€ ì˜µì…˜ì´ ì—†ì–´ìš”.

```kotlin
fun main() = runBlocking {
    println("[${Thread.currentThread().name}] ì‹¤í–‰")
    val networkDeferred: Deferred<String> = async(Dispatchers.IO) {
        println("[${Thread.currentThread().name}] ì‹¤í–‰")
        delay(1000L)
        return@async "Dummy Response"
    }
    val result = networkDeferred.await()
    println(result)

}

// [main @coroutine#1] ì‹¤í–‰
// [DefaultDispatcher-worker-1 @coroutine#2] ì‹¤í–‰
// Dummy Response

--------

fun main() = runBlocking {
    println("[${Thread.currentThread().name}] ì‹¤í–‰")
    val result: String = withContext(Dispatchers.IO) {
        println("[${Thread.currentThread().name}] ì‹¤í–‰")
        delay(1000L)
        return@withContext "Dummy Response"
    }

    println(result)
}

// [main @coroutine#1] ì‹¤í–‰
// [DefaultDispatcher-worker-1 @coroutine#1] ì‹¤í–‰
// Dummy Response
```

### 5.4.2 withContextì˜ ë™ì‘ ë°©ì‹

- asyncì™€ awaitë¥¼ ì—°ì†ì ìœ¼ë¡œ í˜¸ì¶œí•˜ëŠ” ê²ƒê³¼ ë¹„ìŠ·í•˜ê²Œ ë™ì‘í•˜ì§€ë§Œ, ë‚´ë¶€ì ìœ¼ë¡œ ë³´ë©´ ë‹¤ë¥´ê²Œ ë™ì‘
    - asyncê³¼ awaitëŠ” ìƒˆë¡œìš´ ì½”ë£¨í‹´ì„ ìƒì„±í•´ ì‘ì—…ì„ ì²˜ë¦¬
    - withContextëŠ” ì½”ë£¨í‹´ì„ ìœ ì§€í•œì²´ ì‹¤í–‰ â†’ CoroutineContext ê°ì²´ë§Œ ë°”ê¿”ì„œ ì‹¤í–‰ â†’ ì½”ë£¨í‹´ì˜ ì‹¤í–‰ ìŠ¤ë ˆë“œê°€ ë³€í™”í•œë‹¤
        - ì½”ë£¨í‹´ì´ ìœ ì§€ëœ ì±„ë¡œ ì½”ë£¨í‹´ì„ ì‹¤í–‰í•˜ëŠ” ìŠ¤ë ˆë“œë§Œ ë³€ê²½ì´ ë˜ëŠ” ê²ƒ â†’ ë™ê¸°ì  ì‹¤í–‰
    
    ## ğŸ§  CoroutineContextë€?
    
    > **"ì½”ë£¨í‹´ì´ ì–´ë–¤ ì¡°ê±´ ì•„ë˜ì—ì„œ ì‹¤í–‰ë ì§€ë¥¼ ì •ì˜í•˜ëŠ” ì„¤ì • ì •ë³´ë“¤ì˜ ëª¨ìŒ"**ì…ë‹ˆë‹¤.
    > 
    
    ì´ ì•ˆì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ê²ƒë“¤ì´ ë“¤ì–´ìˆì–´ìš”:
    
    | êµ¬ì„± ìš”ì†Œ | ì„¤ëª… |
    | --- | --- |
    | `Dispatcher` | ì´ ì½”ë£¨í‹´ì´ **ì–´ë–¤ ì“°ë ˆë“œ**(Main, IO ë“±)ì—ì„œ ì‹¤í–‰ë ì§€ë¥¼ ê²°ì • |
    | `Job` | ì´ ì½”ë£¨í‹´ì˜ **ìƒëª…ì£¼ê¸° (ì·¨ì†Œ, ì™„ë£Œ)**ë¥¼ ì¶”ì  |
    | `CoroutineName` | ë””ë²„ê¹…ìš©ìœ¼ë¡œ ì½”ë£¨í‹´ì— **ì´ë¦„** ë¶€ì—¬ |
    | `CoroutineExceptionHandler` | ì˜ˆì™¸ ì²˜ë¦¬ í•¸ë“¤ëŸ¬ |
    
    ì´ëŸ° ê²ƒë“¤ì´ ëª¨ì—¬ì„œ í•˜ë‚˜ì˜ `CoroutineContext`ê°€ ë©ë‹ˆë‹¤.
    

### 5.4.3 withContext ì‚¬ìš© ì‹œ ì£¼ì˜ì 

- ë³µìˆ˜ì˜ ë…ë¦½ì ì¸ ì‘ì—…ì´ ë³‘ë ¬ë¡œ ì‹¤í–‰ë¼ì•¼í•˜ëŠ” ìƒí™©ì— wirhContextë¥¼ ì‚¬ìš©í•  ê²½ìš° ì„±ëŠ¥ì— ë¬¸ì œë¥¼ ì¼ìœ¼í‚´
    
    ```kotlin
    package org.example.section5.code1
    
    import kotlinx.coroutines.*
    import section5.code1.getElapsedTime
    
    fun main() = runBlocking {
        val startTime = System.currentTimeMillis()
        println("[${Thread.currentThread().name}] ì‹¤í–‰")
        val helloString: String = withContext(Dispatchers.IO) {
            println("[${Thread.currentThread().name}] ì‹¤í–‰")
            delay(1000L)
            return@withContext "hello"
        }
        println("[${Thread.currentThread().name}] ì‹¤í–‰")
        val worldString: String = withContext(Dispatchers.IO) {
            println("[${Thread.currentThread().name}] ì‹¤í–‰")
            delay(1000L)
            return@withContext "world"
        }
    
        println("[${getElapsedTime(startTime)}] ${helloString} ${worldString}")
    }
    
    // [main @coroutine#1] ì‹¤í–‰
    // [DefaultDispatcher-worker-1 @coroutine#1] ì‹¤í–‰
    // [main @coroutine#1] ì‹¤í–‰
    // [DefaultDispatcher-worker-1 @coroutine#1] ì‹¤í–‰
    // [ì§€ë‚œ ì‹œê°„ : 2030ms] hello world
    ```
    
    ```kotlin
    package org.example.section5.code1
    
    import kotlinx.coroutines.*
    import section5.code1.getElapsedTime
    
    fun main() = runBlocking {
        val startTime = System.currentTimeMillis()
        println("[${Thread.currentThread().name}] ì‹¤í–‰")
        val helloString: Deferred<String> = async(Dispatchers.IO) {
            println("[${Thread.currentThread().name}] ì‹¤í–‰")
            delay(1000L)
            return@async "hello"
        }
        println("[${Thread.currentThread().name}] ì‹¤í–‰")
        val worldString: Deferred<String> = async(Dispatchers.IO) {
            println("[${Thread.currentThread().name}] ì‹¤í–‰")
            delay(1000L)
            return@async "world"
        }
    
        val result = awaitAll(helloString, worldString)
    
        println("[${getElapsedTime(startTime)}] ${result}")
    }
    
    //[main @coroutine#1] ì‹¤í–‰
    //[main @coroutine#1] ì‹¤í–‰
    //[DefaultDispatcher-worker-1 @coroutine#2] ì‹¤í–‰
    //[DefaultDispatcher-worker-3 @coroutine#3] ì‹¤í–‰
    //[ì§€ë‚œ ì‹œê°„ : 1021ms] [hello, world]
    ```
    
    â†’ ì´ì²˜ëŸ¼ withContext í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´, ì½”ë“œê°€ ê¹”ë”í•´ ë³´ì´ì§€ë§Œ, ì˜ëª»í•˜ë©´ ì½”ë£¨í‹´ì„ ë™ê¸°ì ìœ¼ë¡œ ì‹¤í–‰í•˜ë„ë¡ ë§Œë“¬ â†’ ì²˜ë¦¬ ì‹œê°„ ì¦ê°€
    
    â†’ ì¦‰, withContextëŠ” ìƒˆë¡œìš´ ì½”ë£¨í‹´ì„ ë§Œë“¤ì§€ ì•ŠìŒ!